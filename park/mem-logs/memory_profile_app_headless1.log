Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   469    119.3 MiB    119.3 MiB           1   @profile(stream=fp)
   470                                         def pick_month(browser,waits,Action,month):
   471                                             '''checks for month of request booking and clicks it'''
   472    119.3 MiB      0.0 MiB           1       siteEntryMonthText=[]
   473    119.3 MiB      0.0 MiB           1       flag = True
   474    119.3 MiB      0.0 MiB           1       date_list = month.split(' ')
   475    119.3 MiB      0.0 MiB           1       year = date_list[1]
   476    119.3 MiB      0.0 MiB           1       flag = False
   477    119.3 MiB      0.0 MiB           1       siteEntryMonthNext = browser.find_element(By.ID,'nextYearButton')
   478    119.3 MiB      0.0 MiB           1       siteEntryMonth = browser.find_element(By.CSS_SELECTOR,'#monthDropdownPicker').click()
   479    119.3 MiB      0.0 MiB           1       while flag == False:
   480    119.3 MiB      0.0 MiB           1           try:
   481    119.3 MiB      0.0 MiB           1               x = browser.find_element(By.CLASS_NAME,'mat-calendar-body-label').text
   482    119.3 MiB      0.0 MiB           1               if x != date_list[1]:
   483                                                          siteEntryMonthNext.click()
   484    119.3 MiB      0.0 MiB           1               elif x == date_list[1]:
   485    119.3 MiB      0.0 MiB           1                   flag = True
   486    119.3 MiB      0.0 MiB           1                   r=date_list[0]
   487    119.3 MiB      0.0 MiB           1                   waits.until(EC.presence_of_element_located((By.XPATH,"//div[contains(text(),'%s')]" % r))).click()
   488    119.3 MiB      0.0 MiB           1                   break
   489                                                 except:
   490                                                     pass
   491    119.3 MiB      0.0 MiB           1       return True


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   459    119.3 MiB    119.3 MiB           1   @profile(stream=fp)
   460                                         def escape(Action):
   461                                             '''escapes some click function'''
   462    119.3 MiB      0.0 MiB           1       Action.key_down(Keys.ESCAPE).perform()
   463    119.3 MiB      0.0 MiB           1       Action.key_up(Keys.ESCAPE).perform()


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   492    119.3 MiB    119.3 MiB           1   @profile(stream=fp)
   493                                         def pick_day(browser,waits,Action,b_info):
   494                                             '''checks for day of request bookinf and clicks it'''
   495    119.3 MiB      0.0 MiB           1       flag = True
   496    119.3 MiB      0.0 MiB           1       siteEntryDateText=[]
   497                                             #scans the days until it finds the day enteredn much like the month
   498    119.3 MiB      0.0 MiB           2       while flag == True :
   499    119.3 MiB      0.0 MiB           1           siteEntryDateText = browser.find_elements(By.CSS_SELECTOR,'.mat-calendar-body > tr > td')
   500    119.3 MiB      0.0 MiB           1           waits.until(EC.presence_of_element_located((By.CSS_SELECTOR,'.mat-calendar-body > tr > td')))
   501    119.3 MiB      0.0 MiB           1           counter = 0
   502    119.3 MiB      0.0 MiB           9           for date in siteEntryDateText:
   503    119.3 MiB      0.0 MiB           9               counter+=1
   504    119.3 MiB      0.0 MiB           9               if counter > 31:
   505                                                         flag = False
   506                                                         return False
   507    119.3 MiB      0.0 MiB           9               if(date.text == b_info.arrival_day):
   508    119.3 MiB      0.0 MiB           1                   date.click()
   509    119.3 MiB      0.0 MiB           1                   flag = False
   510    119.3 MiB      0.0 MiB           1                   break
   511                                                     
   512    119.3 MiB      0.0 MiB           1       escape(Action)
   513    119.3 MiB      0.0 MiB           1       sleep(0.5)
   514    119.3 MiB      0.0 MiB           1       return True


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   464    119.3 MiB    119.3 MiB           1   @profile(stream=fp)
   465                                         def backspace(Action):
   466                                             '''deletes some inpits'''
   467    119.3 MiB      0.0 MiB           1       Action.key_down(Keys.BACKSPACE).perform()
   468    119.3 MiB      0.0 MiB           1       Action.key_up(Keys.BACKSPACE).perform()


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   459    119.3 MiB    119.3 MiB           1   @profile(stream=fp)
   460                                         def escape(Action):
   461                                             '''escapes some click function'''
   462    119.3 MiB      0.0 MiB           1       Action.key_down(Keys.ESCAPE).perform()
   463    119.3 MiB      0.0 MiB           1       Action.key_up(Keys.ESCAPE).perform()


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   417    119.4 MiB    119.4 MiB           1   @profile(stream=fp)   
   418                                         def advisory(browser,waits):
   419                                             '''checks to see if the site is a double site or not'''
   420    119.4 MiB      0.0 MiB           1       try:
   421    119.4 MiB     -0.0 MiB           1            browser.find_element(By.ID,'message')
   422                                                  waits.until(EC.presence_of_element_located((By.ID,'message')))
   423                                                  t= 'This is part of a Double Site'
   424                                                  waits.until(EC.presence_of_element_located((By.XPATH,"//h2[contains(@id,'mat-dialog-title-0') and contains(text(),'%s')]" % t)))
   425                                                  element = browser.find_element(By.ID,'confirmButton')
   426                                                  waits.until(EC.presence_of_element_located((By.ID,'confirmButton')))
   427                                                  element.click()
   428                                                  return True
   429    119.4 MiB      0.0 MiB           1       except:
   430    119.4 MiB      0.0 MiB           1            return False


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   130    119.4 MiB    119.4 MiB           1   @profile(stream=fp)
   131                                         def confirm_reservation(browser,waits,Action):
   132                                             '''navigates initial reservation page'''
   133    119.4 MiB      0.0 MiB           1       flag1 = True
   134    119.4 MiB      0.0 MiB           1       while flag1 == True:
   135    119.4 MiB      0.0 MiB           1               try:
   136    119.4 MiB      0.0 MiB           3                   waits.until(lambda browser: browser.execute_script('return document.readyState') == 'complete')
   137    119.4 MiB      0.0 MiB           1                   flag1 = False
   138    119.4 MiB      0.0 MiB           1                   break
   139                                                     except:
   140                                                         browser.refresh()
   141    119.4 MiB      0.0 MiB           1       flag = False
   142    119.4 MiB      0.0 MiB           1       if flag1 == False:
   143    119.4 MiB      0.0 MiB           1               try:
   144    119.4 MiB      0.0 MiB           1                   box1  = 'All reservation details are correct.'
   145    119.4 MiB      0.0 MiB           1                   box2 = 'I have read and acknowledge all of the messages listed.'
   146    119.4 MiB      0.0 MiB           1                   box1_bool = False
   147    119.4 MiB      0.0 MiB           1                   box2_bool = False
   148    119.4 MiB      0.0 MiB           1                   counter = 0
   149    119.4 MiB      0.0 MiB           1                   while flag == False:
   150    119.4 MiB      0.0 MiB           1                       counter+=1
   151    119.4 MiB      0.0 MiB           1                       if box1_bool == False:
   152    119.4 MiB      0.0 MiB           1                           try:
   153    119.4 MiB      0.0 MiB           1                               b1 = waits.until(EC.presence_of_element_located((By.XPATH,"//span[contains(text(),'%s')]" % box1))).click() 
   154                                                                 except:
   155                                                                     pass
   156                                                            
   157    119.4 MiB      0.0 MiB           1                       if box2_bool == False:
   158    119.4 MiB      0.0 MiB           1                           try:
   159    119.4 MiB      0.0 MiB           1                               b2 = waits.until(EC.presence_of_element_located((By.XPATH,"//span[contains(text(),'%s')]" % box2))).click()
   160                                                                 except:
   161                                                                     pass
   162    119.4 MiB      0.0 MiB           1                       try:
   163    119.4 MiB      0.0 MiB           1                           n = browser.find_elements(By.XPATH,"//input[contains(@id,'mat-checkbox-')]")
   164    119.4 MiB      0.1 MiB           1                           if n[0].get_attribute("aria-checked") == 'true':
   165    119.4 MiB      0.0 MiB           1                               box1_bool = True
   166    119.4 MiB      0.0 MiB           1                           if n[1].get_attribute("aria-checked") == 'true':
   167    119.4 MiB      0.0 MiB           1                               box2_bool = True
   168    119.4 MiB      0.0 MiB           1                           if box1_bool == True and box2_bool == True:
   169    119.4 MiB      0.0 MiB           1                               flag = True
   170    119.4 MiB      0.0 MiB           1                               break
   171                                                                 else:
   172                                                                     print('1 or both false')
   173                                                             except:
   174                                                                 if counter > 5:
   175                                                                     browser.refresh()
   176                                                                 if counter > 10:
   177                                                                     browser.quit()
   178                                                     except:
   179                                                         return False
   180                                                        
   181                                                         
   182    119.4 MiB      0.0 MiB           1               try:
   183    119.4 MiB      0.0 MiB           1                       c = 'Close'
   184    119.5 MiB      0.0 MiB           1                       waits.until(EC.presence_of_element_located((By.XPATH,"//span[contains(text(),'%s')]" % c))).click()
   185                                         
   186    119.5 MiB      0.0 MiB           1               except:
   187    119.5 MiB      0.0 MiB           1                       print('No Sites')
   188                                         
   189    119.5 MiB      0.0 MiB           1               try:
   190    119.5 MiB      0.0 MiB           1                   waits.until(EC.presence_of_element_located((By.ID,'confirmReservationDetails'))).click()
   191    119.5 MiB      0.0 MiB           1                   sleep(2)
   192    119.5 MiB      0.0 MiB           1                   return True
   193                                                     except:
   194                                                         return False


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   517    119.5 MiB    119.5 MiB           1   @profile(stream=fp)
   518                                         def login(browser,waits,b_info):
   519    119.5 MiB      0.0 MiB           1       found = waits.until(EC.presence_of_element_located((By.ID,'email')))
   520    119.5 MiB      0.0 MiB           1       email = browser.find_element(By.ID,"email")
   521    119.5 MiB      0.0 MiB           1       if bool(found) == True:
   522    119.5 MiB      0.0 MiB           1           type_speed(email,b_info.email)
   523                                             else:
   524                                                 login(browser,waits,b_info)
   525                                         
   526    119.5 MiB      0.0 MiB           1       found = waits.until(EC.presence_of_element_located((By.ID,'password')))
   527    119.5 MiB      0.0 MiB           1       password = browser.find_element(By.ID,"password")
   528    119.5 MiB      0.0 MiB           1       if bool(found) == True:
   529    119.5 MiB      0.0 MiB           1           type_speed(password,b_info.password)
   530                                             else:
   531                                                 login(browser,waits,b_info)
   532    119.5 MiB      0.0 MiB           1       waits.until(EC.presence_of_element_located((By.ID,'loginButton'))).click()


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   109    119.5 MiB    119.5 MiB           1   @profile(stream=fp)
   110                                         def proceed_to_checkout(browser,waits,Action,b_info):
   111                                             '''navigates checkpout page and logs into account'''
   112    119.5 MiB      0.0 MiB           1       n = 5
   113    119.5 MiB      0.0 MiB           1       while n > 0:
   114    119.5 MiB      0.0 MiB           1                   n-=1
   115    119.5 MiB      0.0 MiB           1                   try:
   116    119.5 MiB      0.0 MiB           1                       waits.until(EC.presence_of_element_located((By.ID,'proceedToCheckout'))).click()
   117    119.5 MiB      0.0 MiB           1                       sleep(2)
   118    119.5 MiB      0.0 MiB           1                       break
   119                                                         except:
   120                                                          pass
   121    119.5 MiB      0.0 MiB           1       if n == 0:
   122                                                         return False       
   123    119.5 MiB      0.0 MiB           1       try:
   124    119.5 MiB      0.0 MiB           1           login(browser,waits,b_info)
   125    119.5 MiB      0.0 MiB           1           waits.until(EC.presence_of_element_located((By.TAG_NAME, 'body')))
   126    119.5 MiB      0.0 MiB           1           return True
   127                                             
   128                                             except:
   129                                                 return False


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   195    119.5 MiB    119.5 MiB           1   @profile(stream=fp)
   196                                         def confirm_acknowledgements(waits):
   197                                             '''navigfates acknowledgements page'''
   198    119.5 MiB      0.0 MiB           1       try:
   199    119.5 MiB      0.0 MiB           3           waits.until(lambda browser: browser.execute_script('return document.readyState') == 'complete')
   200                                             except:
   201                                                  pass
   202    119.5 MiB      0.0 MiB           1       counter = 0
   203    119.5 MiB      0.0 MiB           1       while counter < 10:
   204    119.5 MiB      0.0 MiB           1           try:
   205    119.5 MiB      0.0 MiB           1               sleep(1)
   206    119.5 MiB      0.0 MiB           1               waits.until(EC.presence_of_element_located((By.XPATH,"//mat-checkbox[contains(@id,'mat-checkbox-')]"))).click()
   207    119.5 MiB      0.0 MiB           1               break   
   208                                                 except:
   209                                                     print('counter ',counter)
   210                                                     counter+=1
   211    119.5 MiB      0.0 MiB           1       if counter == 10:
   212                                                 return False
   213                                                 
   214    119.5 MiB      0.0 MiB           1       sleep(1)  
   215    119.5 MiB      0.0 MiB           1       while counter < 10:    
   216    119.5 MiB      0.0 MiB           1           try:
   217    119.5 MiB      0.0 MiB           1               waits.until(EC.element_to_be_clickable((By.XPATH,"//button[contains(@id,'confirmAcknowledgements')]"))).click()
   218    119.5 MiB      0.0 MiB           1               return True
   219                                                 except:
   220                                                     print('counter ',counter)
   221                                                     counter+=1
   222                                         
   223                                             if counter == 10:
   224                                                  return False


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   225    119.5 MiB    119.5 MiB           1   @profile(stream=fp)
   226                                         def confirm_details(waits):
   227                                             '''navigates the details page'''
   228    119.5 MiB      0.0 MiB           1       try:
   229    119.5 MiB      0.0 MiB           1           waits.until(EC.element_to_be_clickable((By.XPATH,"//button[contains(@id,'confirmAccountDetails')]"))).click()
   230    119.5 MiB      0.0 MiB           1           return True
   231                                             except:
   232                                                 return False


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   233    119.5 MiB    119.5 MiB           1   @profile(stream=fp)
   234                                         def confirm_occupant(browser,waits,Action,u_info,b_info):
   235                                             '''navigates the occupants page'''
   236    119.5 MiB      0.0 MiB           1       if b_info.occupant == True:
   237                                                         try:   
   238                                                                 O='Someone else will be the occupant.'
   239                                                                 try:
   240                                                                     checkbox = waits.until(EC.presence_of_element_located((By.XPATH,"//span[contains(text(),'%s')]" % O))).click()
   241                                                                     bool_flag = occupant(browser,waits,Action,b_info)
   242                                                                     sleep(2)
   243                                                                     if bool_flag == False:
   244                                                                         print('occupant flag false')
   245                                                                         element = browser.find_element(By.ID,'confirmOccupant')
   246                                                                         Action.move_to_element(element).click().perform()
   247                                                                         return True
   248                                                                  
   249                                                                 except:
   250                                                                     checkbox =  waits.until(EC.presence_of_element_located(By.XPATH,"//mat-radio-button[contains(@id,'mat-radio-3')]")).click()
   251                                                                     bool_flag = occupant(browser,waits,Action,b_info)
   252                                                                     sleep(2)
   253                                                                     if bool_flag == False:
   254                                                                         print('occupant flag false')
   255                                                                         element = browser.find_element(By.ID,'confirmOccupant')
   256                                                                         Action.move_to_element(element).click().perform()
   257                                                                         return True
   258                                                                  
   259                                                                   
   260                                                                 sleep(2)
   261                                         
   262                                                         except:
   263                                                                 print('no occupant')
   264                                                                 n = 5
   265                                                                 while n > 0:
   266                                                                     try:
   267                                                                         waits.until(EC.element_to_be_clickable((By.ID,'confirmOccupant'))).click()
   268                                                                         sleep(2)
   269                                                                         return True
   270                                                                         
   271                                                                     except:
   272                                                                          n-=1
   273                                                           
   274                                             else:
   275    119.5 MiB      0.0 MiB           1                   try:
   276    119.5 MiB      0.0 MiB           1                       n = 5
   277    119.5 MiB      0.0 MiB           1                       while n > 0:
   278    119.5 MiB      0.0 MiB           1                           n-=1
   279    119.5 MiB      0.0 MiB           1                           try:
   280    119.5 MiB      0.0 MiB           1                               waits.until(EC.element_to_be_clickable((By.ID,'confirmOccupant'))).click()
   281    119.5 MiB      0.0 MiB           1                               sleep(2)
   282    119.5 MiB      0.0 MiB           1                               return True
   283                                                 
   284                                                                 except:
   285                                                                     print('except occupant')
   286                                                                     waits.until(EC.presence_of_element_located((By.ID,'confirmOccupant'))).click()
   287                                                                     return True
   288                                                         except:
   289                                                            return False


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   464    119.5 MiB    119.5 MiB           1   @profile(stream=fp)
   465                                         def backspace(Action):
   466                                             '''deletes some inpits'''
   467    119.5 MiB      0.0 MiB           1       Action.key_down(Keys.BACKSPACE).perform()
   468    119.5 MiB      0.0 MiB           1       Action.key_up(Keys.BACKSPACE).perform()


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   459    119.5 MiB    119.5 MiB           1   @profile(stream=fp)
   460                                         def escape(Action):
   461                                             '''escapes some click function'''
   462    119.5 MiB      0.0 MiB           1       Action.key_down(Keys.ESCAPE).perform()
   463    119.5 MiB      0.0 MiB           1       Action.key_up(Keys.ESCAPE).perform()


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   290    119.5 MiB    119.5 MiB           1   @profile(stream=fp)
   291                                         def confirm_party_info(browser,waits,Action):
   292                                             '''navigates the party info page'''
   293    119.5 MiB      0.0 MiB           1       counter = 0
   294    119.5 MiB      0.0 MiB           1       while counter < 10:
   295    119.5 MiB      0.0 MiB           1           try:
   296    119.5 MiB      0.0 MiB           1               browser.find_element(By.XPATH,"//input[contains(@id,'subCat-0')]").click()
   297    119.5 MiB      0.0 MiB           1               backspace(Action)
   298    119.5 MiB      0.0 MiB           1               sleep(0.05)
   299    119.5 MiB      0.0 MiB           1               browser.find_element(By.XPATH,"//input[contains(@id,'subCat-0')]").send_keys('4')
   300    119.5 MiB      0.0 MiB           1               escape(Action)
   301    119.5 MiB      0.0 MiB           1               break
   302                                         
   303                                                 except:
   304                                                     counter +=1
   305    119.5 MiB      0.0 MiB           1       counter = 0
   306    119.5 MiB      0.0 MiB           1       sleep(1)
   307                                         
   308    119.5 MiB      0.0 MiB           1       try:
   309    119.5 MiB      0.0 MiB           1           waits.until(EC.presence_of_element_located((By.ID,'partyInfoButton')))
   310    119.5 MiB      0.0 MiB           1           element = browser.find_element(By.ID,'partyInfoButton')
   311    119.5 MiB      0.0 MiB           1           Action.move_to_element(element).click().perform()
   312    119.5 MiB      0.0 MiB           1           sleep(2)
   313    119.5 MiB      0.0 MiB           1           print('party info return')
   314    119.5 MiB      0.0 MiB           1           return True
   315                                         
   316                                             except:
   317                                                 return False


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   318    119.5 MiB    119.5 MiB           1   @profile(stream=fp)
   319                                         def confirm_addons(browser,waits,Action):
   320                                             '''navigates the confirm addons page'''
   321    119.5 MiB      0.0 MiB           1       flag = True
   322    119.5 MiB      0.0 MiB           2       while flag:
   323    119.5 MiB      0.0 MiB           1           try:
   324    119.5 MiB      0.0 MiB           1                 element = browser.find_element(By.ID,'partyInfoButton').click()
   325    119.5 MiB      0.0 MiB           1                 print('party info clicked')
   326    119.5 MiB      0.0 MiB           1                 sleep(2)
   327    119.5 MiB      0.0 MiB           1                 flag = False
   328                                         
   329                                                 except:
   330                                                      waits.until(EC.presence_of_element_located((By.ID,'confirmAdditionalInformation'))).click()
   331                                                      sleep(2)
   332                                                      print('confirm clicked')
   333                                                      flag = False
   334                                                      break
   335                                         
   336    119.5 MiB      0.0 MiB           1       while flag == False:
   337                                                   
   338    119.5 MiB      0.0 MiB           1           print('confirming')
   339    119.5 MiB      0.0 MiB           1           try:
   340    119.5 MiB      0.0 MiB           1               waits.until(EC.presence_of_element_located((By.ID,'confirmAdditionalInformation'))).click()
   341    119.5 MiB      0.0 MiB           1               print('additional clicked')
   342    119.5 MiB      0.0 MiB           1               sleep(2)
   343    119.5 MiB      0.0 MiB           1               break
   344                                                 except:
   345                                                     waits.until(EC.presence_of_element_located((By.ID,'addOnsOptions'))).click()
   346                                                     sleep(2) 
   347                                                     print('add ons clicked')
   348                                                     return True 
   349    119.5 MiB      0.0 MiB           1       counter = 0
   350    119.5 MiB      0.0 MiB           1       while counter < 10:
   351    119.5 MiB      0.0 MiB           1           try:
   352    119.5 MiB      0.0 MiB           1                waits.until(EC.presence_of_element_located((By.ID,'addOnsOptions'))).click()
   353    119.5 MiB      0.0 MiB           1                sleep(2)
   354    119.5 MiB      0.0 MiB           1                return True
   355                                                 except:
   356                                                     sleep(1)
   357                                                     counter +=1
   358                                                     print('add ons failed')
   359                                                     
   360                                             if counter == 10:
   361                                                  return False


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   362    119.5 MiB    119.5 MiB           1   @profile(stream=fp)
   363                                         def confirm_purchases(browser,waits,Action,s_info):
   364                                             '''using the stripe api it makes a request for credit card details and pays for the campsite'''
   365    119.5 MiB      0.0 MiB           1       card = waits.until(EC.presence_of_element_located((By.ID,'cardNumber')))
   366    119.5 MiB      0.0 MiB           1       type_speed(card,s_info.metadata['metaNu'])
   367    119.5 MiB      0.0 MiB           1       card_name = waits.until(EC.presence_of_element_located((By.ID,'cardHolderName')))     
   368    119.5 MiB      0.0 MiB           1       type_speed(card_name,s_info.metadata['metaNa'])
   369    119.5 MiB      0.0 MiB           1       exp_month = waits.until(EC.presence_of_element_located((By.ID,'cardExpiryMonth'))) 
   370    119.5 MiB      0.0 MiB           1       type_speed(exp_month,s_info.metadata['metaM'])    
   371    119.5 MiB      0.0 MiB           1       exp_year = waits.until(EC.presence_of_element_located((By.ID,'cardExpiryYear')))
   372    119.5 MiB      0.0 MiB           1       type_speed(exp_year,s_info.metadata['metaY'])   
   373    119.5 MiB      0.0 MiB           1       card_code = waits.until(EC.presence_of_element_located((By.ID,'cardCvv')))    
   374    119.5 MiB      0.0 MiB           1       type_speed(card_code,s_info.metadata['metaC'])
   375                                         
   376    119.5 MiB      0.0 MiB           1       sleep(5)
   377    119.5 MiB      0.0 MiB           1       flag = False
   378    119.5 MiB      0.0 MiB           1       while flag == False:
   379    119.5 MiB      0.0 MiB           1                   try:
   380    119.5 MiB      0.0 MiB           1                       card_code = waits.until(EC.presence_of_element_located((By.ID,'applyPaymentButton')))
   381    119.5 MiB      0.0 MiB           1                       card_codes = True
   382    119.5 MiB      0.0 MiB           1                       if card_codes:
   383    119.5 MiB      0.0 MiB           1                           return True
   384                                                          
   385                                                             else:
   386                                                                 browser.quit()
   387                                                                 return False
   388                                                         except:
   389                                                             print('Not found')


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   723    118.8 MiB    118.8 MiB           1   @profile(stream=fp)
   724                                         def reservation(browser,waits,Action,u_info,b_info,s_info):
   725    118.8 MiB      0.0 MiB           1           browser.implicitly_wait(5)
   726    118.8 MiB      0.0 MiB           3           doc_ready =wait(browser, 20).until(lambda browser: browser.execute_script('return document.readyState') == 'complete')
   727    119.1 MiB      0.2 MiB           1           web = browser.get('https://camping.bcparks.ca/')
   728                                         
   729    119.1 MiB      0.0 MiB           1           flag = True
   730    119.1 MiB      0.0 MiB           1           counter = 0
   731    119.1 MiB      0.0 MiB           1           counter = 0
   732    119.1 MiB      0.0 MiB           1           '''
   733                                                 while flag:
   734                                                     counter+=1
   735                                                     b= b_info.site_type
   736                                                     try:
   737                                                         waits.until(EC.presence_of_element_located((By.XPATH,"//div[contains(@id,'tab-group-') and contains(text(),'%s')]" % b))).click()
   738                                                         flag = False
   739                                                     except:
   740                                                         print('Dont care')
   741                                                     if counter > 10:
   742                                                         browser.quit()
   743                                                 '''
   744    119.1 MiB      0.0 MiB           1           month = str(b_info.arrival_date)
   745    119.1 MiB      0.0 MiB           1           date_list = month.split('-')
   746    119.1 MiB      0.0 MiB           1           arr_mon = str(date_list[1])
   747    119.1 MiB      0.0 MiB           1           months = {'01':'JAN','02':'FEB','03':'MAR','04':'APR','05':'MAY','06':'JUN','07':'JUL','08':'AUG','09':'SEPT','10':'OCT','11':'NOV','12':'DEC'} 
   748    119.1 MiB      0.0 MiB           1           if arr_mon in months:
   749    119.1 MiB      0.0 MiB           1               month = months[arr_mon]
   750    119.1 MiB      0.0 MiB           1               month = month + ' '+date_list[0]
   751    119.1 MiB      0.0 MiB           1               print('month ',month)
   752    119.1 MiB      0.0 MiB           1           d2 = datetime(int(date_list[0]),int(date_list[1]),int(date_list[2]),6,59,59,59)
   753                                                 #consent
   754    119.1 MiB      0.0 MiB           1           try:
   755    119.2 MiB      0.2 MiB           1               waits.until(EC.visibility_of_element_located((By.ID,'consentButton')))
   756    119.2 MiB      0.0 MiB           1               waits.until(EC.element_to_be_clickable((By.ID,'consentButton'))).click()
   757                                                 except:
   758                                                     pass
   759                                                 
   760                                                 #park
   761    119.2 MiB      0.0 MiB           1           try:
   762    119.2 MiB      0.0 MiB           1                   found = browser.find_element(By.ID,'park-field').click()
   763    119.2 MiB      0.0 MiB           1                   list_box=[]
   764    119.3 MiB      0.0 MiB           1                   list_box = browser.find_elements(By.CLASS_NAME,'mat-option-text')
   765    119.3 MiB      0.0 MiB          77                   for text in list_box:
   766    119.3 MiB      0.0 MiB          77                       print(text.text)
   767    119.3 MiB      0.0 MiB          77                       if str(text.text) == b_info.park:
   768    119.3 MiB      0.0 MiB           1                           text.click()
   769    119.3 MiB      0.0 MiB           1                           break
   770                                            
   771                                                 except:
   772                                                         end = time.time()
   773                                                         s1 = False
   774                                                         x = 'located park'
   775                                                         return False,end,s1,x
   776                                         
   777    119.3 MiB      0.0 MiB           1           waits.until(EC.presence_of_element_located((By.ID,'mat-date-range-input-0')))
   778    119.3 MiB      0.0 MiB           1           element = waits.until(EC.presence_of_element_located((By.CSS_SELECTOR,'.mat-date-range-input-start-wrapper'))).click()
   779                                                 #pick month
   780    119.3 MiB      0.0 MiB           1           try:
   781    119.3 MiB      0.0 MiB           1                   month_picked = pick_month(browser,waits,Action,month)
   782    119.3 MiB      0.0 MiB           1                   if month_picked == False:
   783                                                             end = time.time()
   784                                                             s1 = False
   785                                                             x = 'pick month'
   786                                                             return False,end,s1,x
   787                                         
   788                                                 except:
   789                                                         end = time.time()
   790                                                         s1 = False
   791                                                         return False,end,s1,'pick month'
   792                                                     #pick day
   793    119.3 MiB      0.0 MiB           1           try:
   794    119.3 MiB      0.0 MiB           1                   day_picked = pick_day(browser,waits,Action,b_info)
   795    119.3 MiB      0.0 MiB           1                   if day_picked == False:
   796                                                             end = time.time()
   797                                                             s1 = False
   798                                                             x = 'pick day'
   799                                                             return False,end,s1,x
   800                                                 except:
   801                                                         end = time.time()
   802                                                         s1 = False
   803                                                         x = 'pick day'
   804                                                         return False,end,s1,x
   805                                         
   806                                                     #Nights
   807    119.3 MiB      0.0 MiB           1           try:
   808    119.3 MiB      0.0 MiB           1                   browser.implicitly_wait(5)
   809    119.3 MiB      0.0 MiB           1                   waits.until(EC.presence_of_element_located((By.ID,'nightsTab'))).click()
   810    119.3 MiB      0.0 MiB           1                   backspace(Action)
   811    119.3 MiB      0.0 MiB           1                   night = waits.until(EC.presence_of_element_located((By.ID,'nights-field')))
   812    119.3 MiB      0.0 MiB           1                   type_speed(night,b_info.nights)
   813                                         
   814    119.3 MiB      0.0 MiB           1                   sleep(2)
   815    119.3 MiB      0.0 MiB           1                   escape(Action)
   816                                                 except:
   817                                                         end = time.time()
   818                                                         s1 = False
   819                                                         x = 'nights'
   820                                                         return False,end,s1,x
   821                                                     #EQUIPMENT
   822    119.3 MiB      0.0 MiB           1           try:
   823    119.3 MiB      0.0 MiB           1                   waits.until(EC.presence_of_element_located((By.ID,'equipment-field'))).click()
   824    119.3 MiB      0.0 MiB           1                   browser.implicitly_wait(5)
   825                                                 except:
   826                                                         end = time.time()
   827                                                         s1 = False
   828                                                         x = 'camp equiptment field'
   829                                                         return False,end,s1,x
   830                                                     
   831    119.3 MiB      0.0 MiB           1           try:
   832    119.3 MiB      0.0 MiB           1                   found = waits.until(EC.presence_of_all_elements_located((By.CLASS_NAME,'mat-option-text')))
   833    119.3 MiB      0.0 MiB           1                   list_box=[]
   834    119.3 MiB      0.0 MiB           1                   list_box = browser.find_elements(By.CLASS_NAME,'mat-option-text')
   835    119.3 MiB      0.0 MiB           2                   for text in list_box:
   836    119.3 MiB      0.0 MiB           2                       if str(text.text) == b_info.equiptment:
   837    119.3 MiB      0.0 MiB           1                           text.click() 
   838    119.3 MiB      0.0 MiB           1                           break
   839                                                         
   840    119.3 MiB      0.0 MiB           1                   browser.implicitly_wait(5)
   841    119.3 MiB      0.0 MiB           1                   sleep(1)
   842    119.3 MiB      0.0 MiB           1                   n= 5
   843                                                      
   844    119.3 MiB      0.0 MiB           1                   while n > 0:
   845    119.3 MiB      0.0 MiB           1                       print(n)
   846    119.3 MiB      0.0 MiB           1                       n-=1
   847    119.3 MiB      0.0 MiB           1                       try:
   848    119.3 MiB      0.0 MiB           1                           browser.find_element(By.ID,'actionSearch').click()
   849    119.3 MiB      0.0 MiB           1                           break
   850                                                             except:
   851                                                                 pass
   852                                              
   853                                                 except:
   854                                                         
   855                                                         end = time.time()
   856                                                         s1 = False
   857                                                         x= 'action search'
   858                                                         return False,end,s1,x
   859                                                     #listview
   860    119.3 MiB      0.0 MiB           1           try:
   861    119.3 MiB      0.0 MiB           1                   browser.implicitly_wait(5)
   862    119.4 MiB      0.0 MiB           1                   waits.until(EC.presence_of_element_located((By.CSS_SELECTOR,'#list-view-button-button > span:nth-child(1)')))
   863    119.4 MiB      0.0 MiB           1                   browser.implicitly_wait(5)
   864    119.4 MiB      0.0 MiB           1                   waits.until(EC.presence_of_element_located((By.ID,'mat-tab-label-1-1')))
   865    119.4 MiB      0.0 MiB           1                   browser.implicitly_wait(5)
   866                                                 except:
   867                                                         end = time.time()
   868                                                         s1 = False
   869                                                         x ='list view pre-spin'
   870                                                         return False,end,s1,x
   871                                               
   872                                                     #spinning overlay
