Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   460    117.4 MiB    117.4 MiB           1   @profile(stream=fp)
   461                                         def pick_month(browser,waits,Action,month):
   462                                             '''checks for month of request booking and clicks it'''
   463    117.4 MiB      0.0 MiB           1       print('month ',month)
   464    117.4 MiB      0.0 MiB           1       siteEntryMonthText=[]
   465    117.4 MiB      0.0 MiB           1       flag = True
   466    117.4 MiB      0.0 MiB           1       date_list = month.split(' ')
   467    117.4 MiB      0.0 MiB           1       year = date_list[1]
   468    117.4 MiB      0.0 MiB           1       flag = False
   469    117.4 MiB      0.0 MiB           1       siteEntryMonthNext = browser.find_element(By.ID,'nextYearButton')
   470    117.4 MiB      0.0 MiB           1       siteEntryMonth = browser.find_element(By.CSS_SELECTOR,'#monthDropdownPicker').click()
   471    117.4 MiB      0.0 MiB           1       while flag == False:
   472    117.4 MiB      0.0 MiB           1           try:
   473    117.4 MiB      0.0 MiB           1               print('finding')
   474    117.4 MiB      0.0 MiB           1               x = browser.find_element(By.CLASS_NAME,'mat-calendar-body-label').text
   475    117.4 MiB      0.0 MiB           1               if x != date_list[1]:
   476                                                          siteEntryMonthNext.click()
   477    117.4 MiB      0.0 MiB           1               elif x == date_list[1]:
   478    117.4 MiB      0.0 MiB           1                   flag = True
   479    117.4 MiB      0.0 MiB           1                   r=date_list[0].upper()
   480    117.4 MiB      0.0 MiB           1                   waits.until(EC.presence_of_element_located((By.XPATH,"//div[contains(text(),'%s')]" % r))).click()
   481    117.4 MiB      0.0 MiB           1                   break
   482                                                 except:
   483                                                     pass
   484    117.4 MiB      0.0 MiB           1       return True


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   450    117.4 MiB    117.4 MiB           1   @profile(stream=fp)
   451                                         def escape(Action):
   452                                             '''escapes some click function'''
   453    117.4 MiB      0.0 MiB           1       Action.key_down(Keys.ESCAPE).perform()
   454    117.4 MiB      0.0 MiB           1       Action.key_up(Keys.ESCAPE).perform()


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   486    117.4 MiB    117.4 MiB           1   @profile(stream=fp)
   487                                         def pick_day(browser,waits,Action,day):
   488                                             '''checks for day of request bookinf and clicks it'''
   489    117.4 MiB      0.0 MiB           1       flag = True
   490    117.4 MiB      0.0 MiB           1       siteEntryDateText=[]
   491                                             #scans the days until it finds the day enteredn much like the month
   492    117.4 MiB      0.0 MiB           2       while flag == True :
   493    117.4 MiB      0.0 MiB           1           siteEntryDateText = browser.find_elements(By.CSS_SELECTOR,'.mat-calendar-body > tr > td')
   494    117.4 MiB      0.0 MiB           1           waits.until(EC.presence_of_element_located((By.CSS_SELECTOR,'.mat-calendar-body > tr > td')))
   495    117.4 MiB      0.0 MiB           1           counter = 0
   496    117.4 MiB      0.0 MiB          28           for date in siteEntryDateText:
   497    117.4 MiB      0.0 MiB          28               counter+=1
   498    117.4 MiB      0.0 MiB          28               if counter > 31:
   499                                                         flag = False
   500                                                         return False
   501    117.4 MiB      0.0 MiB          28               if(date.text == day):
   502    117.4 MiB      0.0 MiB           1                   date.click()
   503    117.4 MiB      0.0 MiB           1                   flag = False
   504    117.4 MiB      0.0 MiB           1                   break
   505                                                     
   506    117.4 MiB      0.0 MiB           1       escape(Action)
   507    117.4 MiB      0.0 MiB           1       sleep(0.5)
   508    117.4 MiB      0.0 MiB           1       return True


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   455    117.4 MiB    117.4 MiB           1   @profile(stream=fp)
   456                                         def backspace(Action):
   457                                             '''deletes some inpits'''
   458    117.4 MiB      0.0 MiB           1       Action.key_down(Keys.BACKSPACE).perform()
   459    117.4 MiB      0.0 MiB           1       Action.key_up(Keys.BACKSPACE).perform()


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   450    117.5 MiB    117.5 MiB           1   @profile(stream=fp)
   451                                         def escape(Action):
   452                                             '''escapes some click function'''
   453    117.5 MiB      0.0 MiB           1       Action.key_down(Keys.ESCAPE).perform()
   454    117.5 MiB      0.0 MiB           1       Action.key_up(Keys.ESCAPE).perform()


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   403    117.5 MiB    117.5 MiB           1   @profile(stream=fp)   
   404                                         def advisory(browser,waits):
   405                                             '''checks to see if the site is a double site or not'''
   406                                             
   407    117.5 MiB      0.0 MiB           1       try:
   408    117.5 MiB      0.0 MiB           1            browser.find_element(By.ID,'message')
   409                                                  waits.until(EC.presence_of_element_located((By.ID,'message')))
   410                                                  t= 'This is part of a Double Site'
   411                                                  waits.until(EC.presence_of_element_located((By.XPATH,"//h2[contains(@id,'mat-dialog-title-0') and contains(text(),'%s')]" % t)))
   412                                                  element = browser.find_element(By.ID,'confirmButton')
   413                                                  waits.until(EC.presence_of_element_located((By.ID,'confirmButton')))
   414                                                  element.click()
   415                                                  return True
   416    117.5 MiB      0.0 MiB           1       except:
   417    117.5 MiB      0.0 MiB           1             if waits.until(EC.presence_of_element_located((By.ID,'errorMessages'))):
   418                                                     return True
   419                                             
   420                                             finally:
   421    117.5 MiB      0.0 MiB           1            return False


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   132    117.5 MiB    117.5 MiB           1   @profile(stream=fp)
   133                                         def confirm_reservation(browser,waits,Action):
   134                                             '''navigates initial reservation page'''
   135    117.5 MiB      0.0 MiB           1       flag1 = True
   136    117.5 MiB      0.0 MiB           1       while flag1 == True:
   137    117.5 MiB      0.0 MiB           1               try:
   138    117.5 MiB      0.0 MiB           3                   waits.until(lambda browser: browser.execute_script('return document.readyState') == 'complete')
   139    117.5 MiB      0.0 MiB           1                   flag1 = False
   140    117.5 MiB      0.0 MiB           1                   print('break')
   141    117.5 MiB      0.0 MiB           1                   break
   142                                                     except:
   143                                                         browser.refresh()
   144    117.5 MiB      0.0 MiB           1       flag = False
   145    117.5 MiB      0.0 MiB           1       while flag == False:
   146    117.5 MiB      0.0 MiB           1               try:
   147    117.5 MiB      0.0 MiB           1                   print('try box')
   148    117.5 MiB      0.0 MiB           1                   box1  = 'All reservation details are correct.'
   149    117.5 MiB      0.0 MiB           1                   box1_bool = False
   150    117.5 MiB      0.0 MiB           1                   counter = 0
   151    117.5 MiB      0.0 MiB           2                   while flag == False:
   152    117.5 MiB      0.0 MiB           1                           counter+=1
   153    117.5 MiB      0.0 MiB           1                           b1 = waits.until(EC.presence_of_element_located((By.XPATH,"//span[contains(text(),'%s')]" % box1))).click() 
   154    117.5 MiB      0.0 MiB           1                           flag = True
   155                                         
   156                                                        
   157    117.5 MiB      0.0 MiB           1                           if counter > 5:
   158                                                                     browser.refresh()
   159    117.5 MiB      0.0 MiB           1                           if counter > 10:
   160                                                                     browser.quit()
   161                                                     except:
   162                                                         return False
   163                                                        
   164                                                         
   165    117.5 MiB      0.0 MiB           1               try:
   166    117.5 MiB      0.0 MiB           1                       c = 'Close'
   167    117.5 MiB      0.0 MiB           1                       waits.until(EC.presence_of_element_located((By.XPATH,"//span[contains(text(),'%s')]" % c))).click()
   168                                         
   169    117.5 MiB      0.0 MiB           1               except:
   170    117.5 MiB      0.0 MiB           1                       print('No Sites')
   171                                         
   172    117.5 MiB      0.0 MiB           1               try:
   173    117.5 MiB      0.0 MiB           1                   waits.until(EC.presence_of_element_located((By.ID,'confirmReservationDetails'))).click()
   174    117.5 MiB      0.0 MiB           1                   sleep(2)
   175    117.5 MiB      0.0 MiB           1                   return True
   176                                                     except:
   177                                                         return False


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   511    117.5 MiB    117.5 MiB           1   @profile(stream=fp)
   512                                         def login(browser,waits,b_info):
   513    117.5 MiB      0.0 MiB           1       print('login')
   514    117.5 MiB      0.0 MiB           1       found = waits.until(EC.presence_of_element_located((By.ID,'email')))
   515    117.5 MiB      0.0 MiB           1       email = browser.find_element(By.ID,"email")
   516    117.5 MiB      0.0 MiB           1       if bool(found) == True:
   517    117.5 MiB      0.0 MiB           1           type_speed(email,b_info.email)
   518                                             else:
   519                                                 login(browser,waits,b_info)
   520                                         
   521    117.5 MiB      0.0 MiB           1       found = waits.until(EC.presence_of_element_located((By.ID,'password')))
   522    117.5 MiB      0.0 MiB           1       password = browser.find_element(By.ID,"password")
   523    117.5 MiB      0.0 MiB           1       if bool(found) == True:
   524    117.5 MiB      0.0 MiB           1           type_speed(password,b_info.password)
   525                                             else:
   526                                                 login(browser,waits,b_info)
   527    117.5 MiB      0.0 MiB           1       b = 'Sign In'
   528    117.5 MiB      0.0 MiB           1       waits.until(EC.presence_of_element_located((By.XPATH,"//div[contains(@class,'button-contents') and contains(text(),'%s')]" % b))).click() 
   529    117.5 MiB      0.0 MiB           1       print('returning True')
   530    117.5 MiB      0.0 MiB           1       return True  


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   110    117.5 MiB    117.5 MiB           1   @profile(stream=fp)
   111                                         def proceed_to_checkout(browser,waits,Action,b_info):
   112                                             '''navigates checkpout page and logs into account'''
   113    117.5 MiB      0.0 MiB           1       n = 5
   114    117.5 MiB      0.0 MiB           1       while n > 0:
   115    117.5 MiB      0.0 MiB           1                   n-=1
   116    117.5 MiB      0.0 MiB           1                   try:
   117    117.5 MiB      0.0 MiB           1                       print('try ',{n})
   118    117.5 MiB      0.0 MiB           1                       waits.until(EC.presence_of_element_located((By.ID,'proceedToCheckout'))).click()
   119    117.5 MiB      0.0 MiB           1                       sleep(2)
   120    117.5 MiB      0.0 MiB           1                       break
   121                                                         except:
   122                                                          pass
   123    117.5 MiB      0.0 MiB           1       if n == 0:
   124                                                         return False       
   125                                         
   126    117.5 MiB      0.0 MiB           1       flag = login(browser,waits,b_info)
   127    117.5 MiB      0.0 MiB           1       sleep(1)
   128    117.5 MiB      0.0 MiB           1       if flag == True:
   129    117.5 MiB      0.0 MiB           1           print('logged in')
   130    117.5 MiB      0.0 MiB           1           return True


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   178    117.5 MiB    117.5 MiB           1   @profile(stream=fp)
   179                                         def confirm_acknowledgements(waits):
   180                                             '''navigfates acknowledgements page'''
   181    117.5 MiB      0.0 MiB           1       try:
   182    117.5 MiB      0.0 MiB           3           waits.until(lambda browser: browser.execute_script('return document.readyState') == 'complete')
   183                                             except:
   184                                                  pass
   185    117.5 MiB      0.0 MiB           1       counter = 0
   186    117.5 MiB      0.0 MiB           1       while counter < 10:
   187    117.5 MiB      0.0 MiB           1           try:
   188    117.5 MiB      0.0 MiB           1               sleep(1)
   189    117.5 MiB      0.0 MiB           1               waits.until(EC.presence_of_element_located((By.XPATH,"//mat-checkbox[contains(@id,'mat-checkbox-')]"))).click()
   190    117.5 MiB      0.0 MiB           1               break   
   191                                                 except:
   192                                                     print('counter ',counter)
   193                                                     counter+=1
   194    117.5 MiB      0.0 MiB           1       if counter == 10:
   195                                                 return False
   196                                                 
   197    117.5 MiB      0.0 MiB           1       sleep(1)  
   198    117.5 MiB      0.0 MiB           1       while counter < 10:    
   199    117.5 MiB      0.0 MiB           1           try:
   200    117.5 MiB      0.0 MiB           1               waits.until(EC.element_to_be_clickable((By.XPATH,"//button[contains(@id,'confirmAcknowledgements')]"))).click()
   201    117.5 MiB      0.0 MiB           1               return True
   202                                                 except:
   203                                                     print('counter ',counter)
   204                                                     counter+=1
   205                                         
   206                                             if counter == 10:
   207                                                  return False


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   208    117.5 MiB    117.5 MiB           1   @profile(stream=fp)
   209                                         def confirm_details(waits):
   210                                             '''navigates the details page'''
   211    117.5 MiB      0.0 MiB           1       try:
   212    117.5 MiB      0.0 MiB           1           waits.until(EC.element_to_be_clickable((By.XPATH,"//button[contains(@id,'confirmAccountDetails')]"))).click()
   213    117.5 MiB      0.0 MiB           1           return True
   214                                             except:
   215                                                 return False


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   216    117.5 MiB    117.5 MiB           1   @profile(stream=fp)
   217                                         def confirm_occupant(browser,waits,Action,u_info,b_info):
   218                                             '''navigates the occupants page'''
   219    117.5 MiB      0.0 MiB           1       if b_info.occupant == True:
   220                                                         try:   
   221                                                                 O='Someone else will be the occupant.'
   222                                                                 try:
   223                                                                     checkbox = waits.until(EC.presence_of_element_located((By.XPATH,"//span[contains(text(),'%s')]" % O))).click()
   224                                                                     bool_flag = occupant(browser,waits,Action,b_info)
   225                                                                     sleep(2)
   226                                                                     if bool_flag == False:
   227                                                                         print('occupant flag false')
   228                                                                         element = browser.find_element(By.ID,'confirmOccupant')
   229                                                                         Action.move_to_element(element).click().perform()
   230                                                                         return True
   231                                                                  
   232                                                                 except:
   233                                                                     checkbox =  waits.until(EC.presence_of_element_located(By.XPATH,"//mat-radio-button[contains(@id,'mat-radio-3')]")).click()
   234                                                                     bool_flag = occupant(browser,waits,Action,b_info)
   235                                                                     sleep(2)
   236                                                                     if bool_flag == False:
   237                                                                         print('occupant flag false')
   238                                                                         element = browser.find_element(By.ID,'confirmOccupant')
   239                                                                         Action.move_to_element(element).click().perform()
   240                                                                         return True
   241                                                                  
   242                                                                   
   243                                                                 sleep(2)
   244                                         
   245                                                         except:
   246                                                                 print('no occupant')
   247                                                                 n = 5
   248                                                                 while n > 0:
   249                                                                     try:
   250                                                                         waits.until(EC.element_to_be_clickable((By.ID,'confirmOccupant'))).click()
   251                                                                         sleep(2)
   252                                                                         return True
   253                                                                         
   254                                                                     except:
   255                                                                          n-=1
   256                                                           
   257                                             else:
   258    117.5 MiB      0.0 MiB           1                   try:
   259    117.5 MiB      0.0 MiB           1                       n = 5
   260    117.5 MiB      0.0 MiB           1                       while n > 0:
   261    117.5 MiB      0.0 MiB           1                           n-=1
   262    117.5 MiB      0.0 MiB           1                           try:
   263    117.5 MiB      0.0 MiB           1                               waits.until(EC.element_to_be_clickable((By.ID,'confirmOccupant'))).click()
   264    117.5 MiB      0.0 MiB           1                               sleep(2)
   265    117.5 MiB      0.0 MiB           1                               return True
   266                                                 
   267                                                                 except:
   268                                                                     print('except occupant')
   269                                                                     waits.until(EC.presence_of_element_located((By.ID,'confirmOccupant'))).click()
   270                                                                     return True
   271                                                         except:
   272                                                            return False


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   455    117.5 MiB    117.5 MiB           1   @profile(stream=fp)
   456                                         def backspace(Action):
   457                                             '''deletes some inpits'''
   458    117.5 MiB      0.0 MiB           1       Action.key_down(Keys.BACKSPACE).perform()
   459    117.5 MiB      0.0 MiB           1       Action.key_up(Keys.BACKSPACE).perform()


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   450    117.5 MiB    117.5 MiB           1   @profile(stream=fp)
   451                                         def escape(Action):
   452                                             '''escapes some click function'''
   453    117.5 MiB      0.0 MiB           1       Action.key_down(Keys.ESCAPE).perform()
   454    117.5 MiB      0.0 MiB           1       Action.key_up(Keys.ESCAPE).perform()


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   273    117.5 MiB    117.5 MiB           1   @profile(stream=fp)
   274                                         def confirm_party_info(browser,waits,Action):
   275                                             '''navigates the party info page'''
   276    117.5 MiB      0.0 MiB           1       counter = 0
   277    117.5 MiB      0.0 MiB           1       while counter < 10:
   278    117.5 MiB      0.0 MiB           1           try:
   279    117.5 MiB      0.0 MiB           1               browser.find_element(By.XPATH,"//input[contains(@id,'subCat-0')]").click()
   280    117.5 MiB      0.0 MiB           1               backspace(Action)
   281    117.5 MiB      0.0 MiB           1               sleep(0.05)
   282    117.5 MiB      0.0 MiB           1               browser.find_element(By.XPATH,"//input[contains(@id,'subCat-0')]").send_keys('2')
   283    117.5 MiB      0.0 MiB           1               escape(Action)
   284    117.5 MiB      0.0 MiB           1               break
   285                                         
   286                                                 except:
   287                                                     counter +=1
   288    117.5 MiB      0.0 MiB           1       counter = 0
   289    117.5 MiB      0.0 MiB           1       sleep(1)
   290                                         
   291    117.5 MiB      0.0 MiB           1       try:
   292    117.5 MiB      0.0 MiB           1           waits.until(EC.presence_of_element_located((By.ID,'partyInfoButton')))
   293    117.5 MiB      0.0 MiB           1           element = browser.find_element(By.ID,'partyInfoButton')
   294    117.5 MiB      0.0 MiB           1           Action.move_to_element(element).click().perform()
   295    117.5 MiB      0.0 MiB           1           sleep(2)
   296    117.5 MiB      0.0 MiB           1           print('party info return')
   297    117.5 MiB      0.0 MiB           1           return True
   298                                         
   299                                             except:
   300                                                 return False


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   301    117.5 MiB    117.5 MiB           1   @profile(stream=fp)
   302                                         def confirm_addons(browser,waits,Action):
   303                                             '''navigates the confirm addons page'''
   304    117.5 MiB      0.0 MiB           1       flag = True
   305    117.5 MiB      0.0 MiB           1       while flag:
   306    117.5 MiB      0.0 MiB           1           try:
   307    117.5 MiB      0.0 MiB           1                 element = browser.find_element(By.ID,'partyInfoButton').click()
   308                                                       print('party info clicked')
   309                                                       sleep(2)
   310                                                       flag = False
   311                                         
   312    117.5 MiB      0.0 MiB           1           except:
   313    117.5 MiB      0.0 MiB           1                waits.until(EC.presence_of_element_located((By.ID,'confirmAdditionalInformation'))).click()
   314    117.5 MiB      0.0 MiB           1                sleep(2)
   315    117.5 MiB      0.0 MiB           1                print('confirm clicked')
   316    117.5 MiB      0.0 MiB           1                flag = False
   317    117.5 MiB      0.0 MiB           1                break
   318                                         
   319    117.5 MiB      0.0 MiB           1       while flag == False:
   320                                                   
   321    117.5 MiB      0.0 MiB           1           print('confirming')
   322    117.5 MiB      0.0 MiB           1           try:
   323    117.5 MiB      0.0 MiB           1               waits.until(EC.presence_of_element_located((By.ID,'confirmAdditionalInformation'))).click()
   324                                                     print('additional clicked')
   325                                                     sleep(2)
   326                                                     break
   327    117.5 MiB      0.0 MiB           1           except:
   328    117.5 MiB      0.0 MiB           1               waits.until(EC.presence_of_element_located((By.ID,'addOnsOptions'))).click()
   329    117.5 MiB      0.0 MiB           1               sleep(2) 
   330    117.5 MiB      0.0 MiB           1               print('add ons clicked')
   331    117.5 MiB      0.0 MiB           1               return True 
   332                                             counter = 0
   333                                             while counter < 10:
   334                                                 try:
   335                                                      waits.until(EC.presence_of_element_located((By.ID,'addOnsOptions'))).click()
   336                                                      sleep(2)
   337                                                      return True
   338                                                 except:
   339                                                     sleep(1)
   340                                                     counter +=1
   341                                                     print('add ons failed')
   342                                                     
   343                                             if counter == 10:
   344                                                  return False


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   374    117.5 MiB    117.5 MiB           1   @profile(stream=fp)
   375                                         def confirm_purchase(browser,waits,Action):
   376                                         
   377    117.5 MiB      0.0 MiB           1       card = waits.until(EC.presence_of_element_located((By.ID,'cardNumber')))
   378    117.5 MiB      0.0 MiB           1       cards = '5524903605801563'
   379    117.5 MiB      0.0 MiB           1       type_speed(card,cards)
   380    117.5 MiB      0.0 MiB           1       card_name = waits.until(EC.presence_of_element_located((By.ID,'cardHolderName')))
   381    117.5 MiB      0.0 MiB           1       type_speed(card_name,'Colton Farbatuk')
   382    117.5 MiB      0.0 MiB           1       exp_month = waits.until(EC.presence_of_element_located((By.ID,'cardExpiryMonth')))
   383    117.5 MiB      0.0 MiB           1       type_speed(exp_month,'03')   
   384    117.5 MiB      0.0 MiB           1       exp_year = waits.until(EC.presence_of_element_located((By.ID,'cardExpiryYear')))
   385    117.5 MiB      0.0 MiB           1       type_speed(exp_year,'2026')   
   386    117.5 MiB      0.0 MiB           1       card_code = waits.until(EC.presence_of_element_located((By.ID,'cardCvv')))   
   387    117.5 MiB      0.0 MiB           1       type_speed(card_code,'359')
   388    117.5 MiB      0.0 MiB           1       sleep(5)
   389    117.5 MiB      0.0 MiB           1       flag = False
   390    117.5 MiB      0.0 MiB           1       while flag == False:
   391    117.5 MiB      0.0 MiB           1                   try:
   392    117.5 MiB      0.0 MiB           1                       card_code = waits.until(EC.presence_of_element_located((By.ID,'applyPaymentButton')))
   393                                                             
   394    117.5 MiB      0.0 MiB           1                       card_codes = True
   395    117.5 MiB      0.0 MiB           1                       if card_codes:
   396    117.6 MiB      0.0 MiB           1                           browser.quit()
   397    117.6 MiB      0.0 MiB           1                           return True
   398                                                             else:
   399                                                                 browser.quit()
   400                                                                 return False
   401                                                         except:
   402                                                             print('Not found')


Filename: C:\Users\cfarb\OneDrive\Desktop\WS5\park\booked.py

Line #    Mem usage    Increment  Occurrences   Line Contents
=============================================================
   750    116.9 MiB    116.9 MiB           1   @profile(stream=fp)
   751                                         def reservation(browser,waits,Action,u_info,b_info,s_info):
   752    116.9 MiB      0.0 MiB           1           @profile(stream=fp)
   753    116.9 MiB      0.0 MiB           1           def mytimer():
   754                                                     print('timer start')
   755                                                     sleep(600)
   756                                                     print('browser closing')
   757                                                     try:
   758                                                         print('close')
   759                                                         browser.close()
   760                                                     except:
   761                                                         print('quoit')
   762                                                         browser.quit()
   763    116.9 MiB      0.0 MiB           1           try:
   764    116.9 MiB      0.0 MiB           1               print('thread start')
   765    116.9 MiB      0.0 MiB           1               x = threading.Thread(target=mytimer)
   766    116.9 MiB      0.0 MiB           1               x.start()
   767                                                 except:
   768                                                      print('could not thread')
   769                                         
   770    116.9 MiB      0.0 MiB           1           browser.implicitly_wait(5)
   771    116.9 MiB      0.0 MiB           3           doc_ready =wait(browser, 20).until(lambda browser: browser.execute_script('return document.readyState') == 'complete')
   772    117.2 MiB      0.3 MiB           1           browser.get('https://camping.bcparks.ca/')
   773                                         
   774                                         
   775    117.2 MiB      0.0 MiB           1           print('\n\n')
   776    117.2 MiB      0.0 MiB           1           flag = True
   777    117.2 MiB      0.0 MiB           1           counter = 0
   778    117.2 MiB      0.0 MiB           1           counter = 0
   779    117.2 MiB      0.0 MiB           1           sleep(1)
   780    117.2 MiB      0.0 MiB           1           '''
   781                                                 while flag:
   782                                                     counter+=1
   783                                                     b= b_info.site_type
   784                                                     try:
   785                                                         waits.until(EC.presence_of_element_located((By.XPATH,"//div[contains(@id,'tab-group-') and contains(text(),'%s')]" % b))).click()
   786                                                         flag = False
   787                                                     except:
   788                                                         print('Dont care')
   789                                                     if counter > 10:
   790                                                         browser.quit()
   791                                                 '''
   792    117.2 MiB      0.0 MiB           1           month = str(b_info.arrival_date)
   793    117.2 MiB      0.0 MiB           1           date_list = month.split('-')
   794    117.2 MiB      0.0 MiB           1           day = str(int(date_list[2]))
   795    117.2 MiB      0.0 MiB           1           arr_mon = str(date_list[1])
   796    117.2 MiB      0.0 MiB           1           months = {'01':'JAN','02':'FEB','03':'MAR','04':'APR','05':'May','06':'JUN','07':'JUL','08':'AUG','09':'SEP','10':'Oct','11':'Nov','12':'Dec'} 
   797    117.2 MiB      0.0 MiB           1           if arr_mon in months:
   798    117.2 MiB      0.0 MiB           1               month = months[arr_mon]
   799    117.2 MiB      0.0 MiB           1               month = month + ' '+date_list[0]
   800    117.2 MiB      0.0 MiB           1           d2 = datetime(int(date_list[0]),int(date_list[1]),int(date_list[2]),6,59,59,59)
   801    117.2 MiB      0.0 MiB           1           print('month : ',month)
   802    117.2 MiB      0.0 MiB           1           print('day : ',day)
   803                                                 #consent
   804    117.2 MiB      0.0 MiB           1           try:
   805    117.3 MiB      0.1 MiB           1               waits.until(EC.visibility_of_element_located((By.ID,'consentButton')))
   806    117.5 MiB      0.1 MiB           1               waits.until(EC.element_to_be_clickable((By.ID,'consentButton'))).click()
   807    117.5 MiB      0.0 MiB           1               print('consent click')
   808                                                 except:
   809                                                     print('skipped consent')
   810    117.5 MiB      0.0 MiB           1           counter = 0        
   811                                                 #park
   812    117.5 MiB      0.0 MiB           1           try:
   813    117.5 MiB      0.0 MiB           1                   print('park')
   814                                         
   815                                                         #found = browser.find_element(By.ID,'park-field').click()
   816    117.5 MiB      0.0 MiB           1                   print('park field')
   817    117.5 MiB      0.0 MiB           1                   list_box=[]
   818    117.5 MiB      0.0 MiB           1                   idbox = browser.find_element(By.XPATH,"//input[contains(@id,'park-autocomplete')]").click()
   819    117.5 MiB      0.0 MiB           1                   print('idbox clicked')
   820    117.5 MiB      0.0 MiB           1                   try:
   821    117.5 MiB      0.0 MiB           1                       found = browser.find_element(By.ID,'park-field').click()
   822    117.5 MiB      0.0 MiB           1                       if found:
   823                                                                 print('located parks')
   824    117.5 MiB      0.0 MiB           1                       list_box=[]
   825    117.5 MiB      0.0 MiB           1                       list_box = browser.find_elements(By.CLASS_NAME,'mat-option-text')
   826    117.5 MiB      0.0 MiB          29                       for text in list_box:
   827    117.5 MiB      0.0 MiB          29                           print(text.text)
   828    117.5 MiB      0.0 MiB          29                           if str(text.text) == b_info.park:
   829    117.5 MiB      0.0 MiB           1                               text.click()
   830    117.5 MiB      0.0 MiB           1                               break
   831                                                         except:
   832                                                             print('except list')
   833                                                             list_box = browser.find_elements(By.CLASS_NAME,'mat-option-text')
   834                                                             print('listbo')
   835                                                             for text in list_box:
   836                                                                 print(text.text)
   837                                                                 if str(text.text) == b_info.park:
   838                                                                     text.click()
   839                                                                 break
   840                                            
   841                                                 except:
   842                                                         counter+=1
   843                                                         if counter > 5:
   844                                                             end = time.time()
   845                                                             s1 = False
   846                                                             x = 'located park'
   847                                                             return False,end,s1,x
   848                                         
   849    117.4 MiB     -0.1 MiB           1           waits.until(EC.presence_of_element_located((By.ID,'mat-date-range-input-0')))
   850    117.4 MiB      0.0 MiB           1           element = waits.until(EC.presence_of_element_located((By.CSS_SELECTOR,'.mat-date-range-input-start-wrapper'))).click()
   851    117.4 MiB      0.0 MiB           1           print('month picked')
   852                                                 #pick month
   853    117.4 MiB      0.0 MiB           1           try:
   854    117.4 MiB      0.0 MiB           1                   month_picked = pick_month(browser,waits,Action,month)
   855    117.4 MiB      0.0 MiB           1                   if month_picked == False:
   856                                                             end = time.time()
   857                                                             s1 = False
   858                                                             x = 'pick month'
   859                                                             return False,end,s1,x
   860                                         
   861                                                 except:
   862                                                         end = time.time()
   863                                                         s1 = False
   864                                                         return False,end,s1,'pick month'
   865                                                     #pick day
   866                                                 
   867    117.4 MiB      0.0 MiB           1           try:
   868    117.4 MiB      0.0 MiB           1                   day_picked = pick_day(browser,waits,Action,day)
   869    117.4 MiB      0.0 MiB           1                   if day_picked == False:
   870                                                             end = time.time()
   871                                                             s1 = False
   872                                                             x = 'pick day'
   873                                                             return False,end,s1,x
   874                                                 except:
   875                                                         end = time.time()
   876                                                         s1 = False
   877                                                         x = 'pick day'
   878                                                         return False,end,s1,x
   879    117.4 MiB      0.0 MiB           1           print('day picked')
   880                                         
   881                                                     #Nights
   882    117.4 MiB      0.0 MiB           1           try:
   883    117.4 MiB      0.0 MiB           1                   browser.implicitly_wait(5)
   884    117.4 MiB      0.0 MiB           1                   waits.until(EC.presence_of_element_located((By.ID,'nightsTab'))).click()
   885    117.4 MiB      0.0 MiB           1                   backspace(Action)
   886    117.4 MiB      0.0 MiB           1                   night = waits.until(EC.presence_of_element_located((By.ID,'nights-field')))
   887    117.4 MiB      0.0 MiB           1                   type_speed(night,b_info.nights)
   888                                         
   889    117.5 MiB      0.0 MiB           1                   sleep(2)
   890    117.5 MiB      0.0 MiB           1                   escape(Action)
   891                                                 except:
   892                                                         end = time.time()
   893                                                         s1 = False
   894                                                         x = 'nights'
   895                                                         return False,end,s1,x
   896                                                     #EQUIPMENT
   897    117.5 MiB      0.0 MiB           1           try:
   898    117.5 MiB      0.0 MiB           1                   waits.until(EC.presence_of_element_located((By.ID,'equipment-field'))).click()
   899    117.5 MiB      0.0 MiB           1                   browser.implicitly_wait(5)
   900                                                 except:
   901                                                         end = time.time()
   902                                                         s1 = False
   903                                                         x = 'camp equiptment field'
   904                                                         return False,end,s1,x
   905                                                     
   906    117.5 MiB      0.0 MiB           1           try:
   907    117.5 MiB      0.0 MiB           1                   found = waits.until(EC.presence_of_all_elements_located((By.CLASS_NAME,'mat-option-text')))
   908    117.5 MiB      0.0 MiB           1                   list_box=[]
   909    117.5 MiB      0.0 MiB           1                   list_box = browser.find_elements(By.CLASS_NAME,'mat-option-text')
   910    117.5 MiB      0.0 MiB           2                   for text in list_box:
   911    117.5 MiB      0.0 MiB           2                       if str(text.text) == b_info.equiptment:
   912    117.5 MiB      0.0 MiB           1                           text.click() 
   913    117.5 MiB      0.0 MiB           1                           break
   914                                                         
   915    117.5 MiB      0.0 MiB           1                   browser.implicitly_wait(5)
   916    117.5 MiB      0.0 MiB           1                   sleep(1)
   917    117.5 MiB      0.0 MiB           1                   n= 5
   918                                                      
   919    117.5 MiB      0.0 MiB           1                   while n > 0:
   920    117.5 MiB      0.0 MiB           1                       print(n)
   921    117.5 MiB      0.0 MiB           1                       n-=1
   922    117.5 MiB      0.0 MiB           1                       try:
   923    117.5 MiB      0.0 MiB           1                           browser.find_element(By.ID,'actionSearch').click()
   924    117.5 MiB      0.0 MiB           1                           break
   925                                                             except:
   926                                                                 pass
   927                                              
   928                                                 except:
   929                                                         
   930                                                         end = time.time()
   931                                                         s1 = False
   932                                                         x= 'action search'
   933                                                         return False,end,s1,x
   934                                                     #listview
   935    117.5 MiB      0.0 MiB           1           try:
   936    117.5 MiB      0.0 MiB           1                   browser.implicitly_wait(5)
   937    117.5 MiB      0.0 MiB           1                   waits.until(EC.presence_of_element_located((By.CSS_SELECTOR,'#list-view-button-button > span:nth-child(1)')))
   938    117.5 MiB      0.0 MiB           1                   browser.implicitly_wait(5)
   939    117.5 MiB      0.0 MiB           1                   waits.until(EC.presence_of_element_located((By.ID,'mat-tab-label-1-1')))
   940    117.5 MiB      0.0 MiB           1                   browser.implicitly_wait(5)
   941                                                 except:
   942                                                         end = time.time()
   943                                                         s1 = False
   944                                                         x ='list view pre-spin'
   945                                                         return False,end,s1,x
   946                                               
   947                                                     #spinning overlay
   948    117.5 MiB      0.0 MiB           1           try:
   949    117.5 MiB      0.0 MiB           1               waits.until(EC.invisibility_of_element((By.CLASS_NAME,'loading-spinner overlay ng-star-inserted')))
   950                                                 except:
   951                                                     if waits.until(EC.visibility_of_element_located((By.ID,'mat-tab-label-1-1'))):
   952                                                          pass
   953                                                     else:
   954                                                         end = time.time()
   955                                                         s1 = False
   956                                                         x ='loading spinner post spin'
   957                                                         return False,end,s1,x
   958                                                 
   959                                                     #campgroundlist
   960    117.5 MiB      0.0 MiB           1           try:
   961    117.5 MiB      0.0 MiB           1               waits.until(EC.visibility_of_element_located((By.ID,'mat-tab-label-1-1')))
   962    117.5 MiB      0.0 MiB           1               browser.implicitly_wait(5)
   963    117.5 MiB      0.0 MiB           1               waits.until(EC.element_to_be_clickable((By.ID,'list-view-button'))).click()
   964                                                 
   965                                                
   966                                                 except:
   967                                                     end = time.time()
   968                                                     s1 = False
   969                                                     x ='list view button'
   970                                                     return False,end,s1,x
   971                                         
   972                                                     #second camp 
   973    117.5 MiB      0.0 MiB           1           print('second camp')
   974    117.5 MiB      0.0 MiB           1           try:
   975    117.5 MiB      0.0 MiB           1               b = str(b_info.campground)
   976    117.5 MiB      0.0 MiB           1               b = b.lstrip().rstrip()
   977    117.5 MiB      0.0 MiB           1               waits.until(EC.presence_of_element_located((By.XPATH,"//h3[contains(text(),'%s')]" % b))).click()   
   978                                         
   979                                         
   980                                                 except:
   981                                                     pass
   982    117.5 MiB      0.0 MiB           1           try:
   983    117.5 MiB      0.0 MiB           1                b = str(b_info.inner_campground)
   984    117.5 MiB      0.0 MiB           1                b = b.lstrip().rstrip()
   985    117.5 MiB      0.0 MiB           1                x = browser.find_element(By.XPATH,"//h3[contains(text(),'%s')]" % b)
   986                                                      x.click()
   987    117.5 MiB      0.0 MiB           1           except Exception:
   988    117.5 MiB      0.0 MiB           1                pass
   989                                         
   990                                         
   991                                                     #looking for site
   992                                                 
   993                                         
   994    117.5 MiB      0.0 MiB           1           waits.until(EC.presence_of_all_elements_located((By.CSS_SELECTOR,'.mat-accordion')))
   995    117.5 MiB      0.0 MiB           1           site_found = False
   996    117.5 MiB      0.0 MiB           1           found_counter = 0
   997    117.5 MiB      0.0 MiB           2           while site_found == False:
   998    117.5 MiB      0.0 MiB           1                   print('llop ')
   999    117.5 MiB      0.0 MiB           1                   try:
  1000    117.5 MiB      0.0 MiB           1                       found_counter+=1
  1001    117.5 MiB      0.0 MiB           1                       sites = browser.find_elements(By.XPATH,"//h3[contains(@id,'resource-name-')]")
  1002    117.5 MiB      0.0 MiB           3                       for i in sites:
  1003    117.5 MiB      0.0 MiB           3                               print(i.text)
  1004    117.5 MiB      0.0 MiB           3                               if b_info.site in i.text:
  1005    117.5 MiB      0.0 MiB           1                                   print('site : ',i.text)
  1006    117.5 MiB      0.0 MiB           1                                   i.click()
  1007    117.5 MiB      0.0 MiB           1                                   r = 'Reserve'
  1008    117.5 MiB      0.0 MiB           1                                   sleep(2)
  1009    117.5 MiB      0.0 MiB           1                                   site_found = True
  1010    117.5 MiB      0.0 MiB           1                                   break
